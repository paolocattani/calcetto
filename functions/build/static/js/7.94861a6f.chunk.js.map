{"version":3,"sources":["../node_modules/react-bootstrap/esm/Table.js","../node_modules/react-bootstrap/esm/ToggleButton.js","../node_modules/react-bootstrap/esm/InputGroup.js","components/Pair/noData.component.tsx","components/Player/select.component.tsx","components/Pair/helper.ts","components/Pair/editor.js","components/Pair/toolsbar.component.tsx","components/Pair/expand.manager.tsx","components/Pair/table.component.tsx","@common/constants/label.ts","common.module.css","components/Tournament/badge.component.tsx","components/Stats/table.component.tsx","test/commons.ts"],"names":["Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","noop","ToggleButton","children","name","checked","type","onChange","value","disabled","inputRef","_useState","useState","focused","setFocused","handleFocus","useCallback","e","target","tagName","handleBlur","Button","undefined","active","as","autoComplete","onFocus","onBlur","displayName","InputGroupAppend","createWithBsPrefix","InputGroupPrepend","InputGroupText","Component","InputGroup","_ref$as","InputGroupWithExtras","Text","Radio","Checkbox","Append","Prepend","NoData","addRow","optionsLength","isEditable","t","useTranslation","players","diff","onClick","current","min","to","PlayerSelection","styles","row","columnIndex","onSelect","onUpdate","options","selectedOption","setSelectedOption","option","actionMeta","id","getOptionLabel","alias","getOptionValue","toString","placeholder","isSearchable","isClearable","customStyles","provided","state","backgroundColor","color","input","control","height","marginBottom","singleValue","valueContainer","fontSize","ALIGN_CENTER","playerSelection","editorProps","rowIndex","checkBoxProps","align","headerStyle","column","colIndex","width","editor","Type","CHECKBOX","formatter","cell","formatExtraData","ButtonGroup","toggle","columns","labels","dataField","text","editable","hidden","player1","editorRenderer","player2","stage1","SELECT","toUpperCase","split","map","label","Toolsbar","addMultipleRows","confirmPairs","goBack","deleteStage1","deleteRow","setStage1Number","setStage1Name","setNewRowsNumber","deleteDisabled","selectedLength","availableRows","stage1Number","newRowsNumber","rowsLength","isAdmin","useSelector","AuthSelector","assignMatches","FormControl","max","Math","floor","step","event","Number","currentTarget","tournament","progress","TournamentProgress","Stage1","Stage2","addPairs","commonStyle","toolsBarContainer","data-cy","Row","toolsBar","Col","PairsSelection","expandManager","stats","setStats","expandedRows","setExpandedRows","isLoading","setIsLoading","expandByColumnOnly","showExpandColumn","expanded","expandHeaderColumnRenderer","isAnyExpands","expandColumnRenderer","renderer","i18next","LABEL_COMMON_LOADING","onExpand","isExpand","message","fetchPairStats","pairs","then","result","SuccessCodes","includes","code","statistics","console","log","ex","filter","x","onExpandAll","isExpandAll","rows","ids","r","hideAskUser","show","title","withRouter","currentHistory","useHistory","dispatch","useDispatch","TournamentSelector","getTournament","askUser","setAskUser","data","setData","selectedRows","setSelectedRows","showErrorMessage","toast","error","autoClose","showSuccessMessage","success","index","a","emptyRow","getEmptyPair","postPair","pair","rowNumber","length","p","i","ii","forEach","push","deletePairs","pairsList","find","selectedRow","sort","e1","e2","localeCompare","useEffect","fetchPairs","tId","fetchPlayers","addEmpty","playersList","processDeleteStage1","fetch","method","headers","body","JSON","stringify","response","json","TournamentAction","update","request","updateOptions","player","selected","selectedElement","Promise","all","rowElement","getEmptyPlayer","findAlias","player1Id","player2Id","HTTPStatusCode","OK","updatePair","newRowsElement","selectRow","mode","isSelected","found","onSelectAll","style","hideSelectColumn","reduce","accumulator","paid1","paid2","setTimeout","missingStage1Name","stage1Name","missingPairs","invalidStage","pairsInStage","allNames","stageName","MIN_PAIR_PER_STAGE","PairAction","history","onHide","names","newRows","prevData","bootstrap4","keyField","cellEdit","cellEditFactory","blurToSave","afterSaveCell","oldValue","newValue","expandRow","noDataIndication","caption","headerClasses","LABEL_AUTH_PASSWORD","LABEL_TOURNAMENT_SELECT","module","exports","TournamentBadge","public","formatDate","date","StatsComponent","stage2","tot","darkBackGround","s1win","s2win","totwin","winS1Percentage","winS2Percentage","winPercentage","s1def","s2def","totdef","defS1Percentage","defS2Percentage","defPercentage","totS1","totS2","totMatch","ratioS1","ratioS2","ratioTot","tournamentsList","Date","New","autoOrder","ownerId","UserRole","Admin","User"],"mappings":"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","file":"static/js/7.94861a6f.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback, useState } from 'react';\nimport Button from './Button';\n\nvar noop = function noop() {\n  return undefined;\n};\n\nvar ToggleButton = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      name = _ref.name,\n      className = _ref.className,\n      checked = _ref.checked,\n      type = _ref.type,\n      onChange = _ref.onChange,\n      value = _ref.value,\n      disabled = _ref.disabled,\n      inputRef = _ref.inputRef,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"name\", \"className\", \"checked\", \"type\", \"onChange\", \"value\", \"disabled\", \"inputRef\"]);\n\n  var _useState = useState(false),\n      focused = _useState[0],\n      setFocused = _useState[1];\n\n  var handleFocus = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(true);\n  }, []);\n  var handleBlur = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(false);\n  }, []);\n  return /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n    ref: ref,\n    className: classNames(className, focused && 'focus', disabled && 'disabled'),\n    type: undefined,\n    active: !!checked,\n    as: \"label\"\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: name,\n    type: type,\n    value: value,\n    ref: inputRef,\n    autoComplete: \"off\",\n    checked: !!checked,\n    disabled: !!disabled,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onChange: onChange || noop\n  }), children);\n});\nToggleButton.displayName = 'ToggleButton';\nexport default ToggleButton;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar InputGroupAppend = createWithBsPrefix('input-group-append');\nvar InputGroupPrepend = createWithBsPrefix('input-group-prepend');\nvar InputGroupText = createWithBsPrefix('input-group-text', {\n  Component: 'span'\n});\n\nvar InputGroupCheckbox = function InputGroupCheckbox(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"checkbox\"\n  }, props)));\n};\n\nvar InputGroupRadio = function InputGroupRadio(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"radio\"\n  }, props)));\n};\n\n/**\n *\n * @property {InputGroupAppend} Append\n * @property {InputGroupPrepend} Prepend\n * @property {InputGroupText} Text\n * @property {InputGroupRadio} Radio\n * @property {InputGroupCheckbox} Checkbox\n */\nvar InputGroup = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      size = _ref.size,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"size\", \"className\", \"as\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'input-group');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsPrefix, size && bsPrefix + \"-\" + size)\n  }));\n});\nInputGroup.displayName = 'InputGroup';\n\nvar InputGroupWithExtras = _extends({}, InputGroup, {\n  Text: InputGroupText,\n  Radio: InputGroupRadio,\n  Checkbox: InputGroupCheckbox,\n  Append: InputGroupAppend,\n  Prepend: InputGroupPrepend\n});\n\nexport default InputGroupWithExtras;","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\ninterface NoDataProps {\n  optionsLength: number;\n  isEditable: boolean;\n  addRow: () => void;\n}\n\n// Componente da mostrare se non sono presenti coppie\nconst NoData: React.FC<NoDataProps> = ({ addRow, optionsLength, isEditable }) => {\n  const { t } = useTranslation(['common', 'pair','player']);\n  const MIN_PLAYERS = 8;\n  const players = optionsLength - 1;\n  const diff = players < MIN_PLAYERS ? MIN_PLAYERS - players : 0;\n  if (!optionsLength) return null;\n  return players >= MIN_PLAYERS ? (\n    <>\n      <p>{`${t('pair:missing.1')}...`}</p>\n      <Button variant=\"success\" onClick={addRow} disabled={!isEditable}>\n        {t('pair:add.one')}\n      </Button>\n    </>\n  ) : (\n    <>\n      <p>{t('pair:missing.2', { current: players, min: MIN_PLAYERS })}</p>\n      <p>{`${diff === 1 ? t('pair:missing.3') : t('pair:missing.4', { diff })}...`}</p>\n      <Link to={'/player'}>\n        <Button variant=\"success\">{t('player:add')}</Button>\n      </Link>\n    </>\n  );\n};\n\nexport default NoData;\n","import { PlayerDTO } from '../../@common/dto';\nimport React, { useState } from 'react';\nimport Select, { Styles, ValueType, ActionMeta } from 'react-select';\n\nexport interface PlayerSelectProps {\n\tstyles?: Partial<Styles>;\n\toptions: PlayerDTO[];\n\tcolumnIndex: number;\n\tid: number;\n\tonUpdate: any;\n\tonSelect: any;\n\trow: any;\n}\n\nconst PlayerSelection: React.FC<PlayerSelectProps> = React.forwardRef(\n\t({ styles, row, columnIndex, /*id,*/ onUpdate, onSelect, options }, ref) => {\n\t\tconst [selectedOption, setSelectedOption] = useState<PlayerDTO>();\n\n\t\tconst handleChange = (option: ValueType<PlayerDTO, false>, actionMeta: ActionMeta<PlayerDTO>) => {\n\t\t\tsetSelectedOption(option as PlayerDTO);\n\t\t\tonSelect(option, row.id, columnIndex);\n\t\t};\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tstyles={styles}\n\t\t\t\toptions={options}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tgetOptionLabel={(option) => option.alias}\n\t\t\t\tgetOptionValue={(option) => option.id?.toString(10)!}\n\t\t\t\tvalue={selectedOption}\n\t\t\t\tplaceholder=\"Cerca...\"\n\t\t\t\tisSearchable\n\t\t\t\tisClearable\n\t\t\t/>\n\t\t);\n\t}\n);\n\nexport default PlayerSelection;\n","import { Styles } from 'react-select';\nimport { PairDTO } from '../../@common/dto';\n\nexport const valueFormatter = (selectedOption: PairDTO) =>\n  selectedOption.alias ? `${selectedOption.alias}` : createAlias(selectedOption);\n\nexport function createAlias(selectedOption: PairDTO) {\n  let value = `${selectedOption.rowNumber} : `;\n  const { player1, player2 } = selectedOption;\n  value += player1!.alias ? player1!.alias : player1!.name;\n  value += ' - ' + player2!.alias ? player2!.alias : player2!.name;\n  // value += ` ( ${id} )`;\n  return value;\n}\n\nexport const customStyles: Partial<Styles> | undefined = {\n  // menuList: (provided, state) => ({ ...provided, border: '1px solid #ffc107' }),\n  option: (provided, state) => ({\n    ...provided,\n    backgroundColor: 'white',\n    color: 'black',\n    '&:hover': {\n      backgroundColor: '#64bd9c',\n      color: 'white',\n    },\n  }),\n  input: (provided) => ({ ...provided, backgroundColor: '#64bd9c' }),\n  control: (provided) => ({ ...provided, height: '3vmin', marginBottom: 'auto' }),\n  singleValue: (provided) => ({ ...provided }),\n  valueContainer: (provided) => ({ ...provided, height: '100%', fontSize: 'larger' }),\n};\n","import React from 'react';\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\nimport PlayerSelect from '../Player/select.component';\nimport { customStyles } from './helper';\n\nimport { ToggleButton, ButtonGroup } from 'react-bootstrap';\n\nconst ALIGN_CENTER = 'center';\nconst YES = 'Si';\nconst NO = 'No';\n\nconst playerSelection = (editorProps, value, row, rowIndex, columnIndex, onSelect, options) => (\n  <PlayerSelect\n    {...editorProps}\n    id={columnIndex}\n    row={row}\n    rowIndex={rowIndex}\n    columnIndex={columnIndex}\n    value={value}\n    onSelect={onSelect}\n    options={options}\n    styles={customStyles}\n  />\n);\n\nconst checkBoxProps = {\n  align: () => ALIGN_CENTER,\n  headerStyle: (column, colIndex) => ({ width: '7,5%' }),\n  editor: {\n    type: Type.CHECKBOX,\n    value: `${YES}:${NO}`,\n  },\n  formatter: (cell, row, rowIndex, formatExtraData) => (\n    <ButtonGroup toggle className=\"mb-2\">\n      <ToggleButton variant={!!cell ? 'success' : 'danger'} checked={cell} value=\"1\" type=\"checkbox\">\n        {!!cell ? 'Pagato' : 'Non Pagato'}\n      </ToggleButton>\n    </ButtonGroup>\n  ),\n  //style: (content, row, rowIndex, columnIndex) => (content !== NO ? { backgroundColor: '#ffbf47' } : null),\n};\n\nexport const columns = (onSelect, options, labels) => [\n  { dataField: 'id', text: 'ID', editable: false, hidden: true, align: () => ALIGN_CENTER },\n  { dataField: 'rowNumber', text: 'ID', editable: false, align: () => ALIGN_CENTER },\n  {\n    dataField: 'player1.alias',\n    text: labels.player1,\n    align: () => ALIGN_CENTER,\n    editorRenderer: (editorProps, value, row, column, rowIndex, columnIndex) =>\n      playerSelection(editorProps, value, row, rowIndex, columnIndex, onSelect, options),\n    headerStyle: (column, colIndex) => ({ width: '20%' }),\n  },\n  {\n    dataField: 'player2.alias',\n    text: labels.player2,\n    align: () => ALIGN_CENTER,\n    editorRenderer: (editorProps, value, row, column, rowIndex, columnIndex) =>\n      playerSelection(editorProps, value, row, rowIndex, columnIndex, onSelect, options),\n    headerStyle: (column, colIndex) => ({ width: '20%' }),\n  },\n  { dataField: 'alias', text: labels.alias, headerStyle: (column, colIndex) => ({ width: '25%' }) },\n  {\n    dataField: 'stage1Name',\n    text: labels.stage1,\n    align: () => ALIGN_CENTER,\n    headerStyle: (column, colIndex) => ({ width: '10%' }),\n    editor: {\n      type: Type.SELECT,\n      options: 'abcdefghijklmnopqrstuvwxyz'\n        .toUpperCase()\n        .split('')\n        .map((e) => ({ value: e, label: e })),\n    },\n  },\n  {\n    dataField: 'paid1',\n    text: 'Pagato 1',\n    ...checkBoxProps,\n  },\n  {\n    dataField: 'paid2',\n    text: 'Pagato 2',\n    ...checkBoxProps,\n  },\n];\n\nexport const cellEditProps = (editable) =>\n  cellEditFactory({\n    mode: editable ? 'click' : 'none',\n    blurToSave: true,\n    afterSaveCell: (oldValue, newValue, row, column) => {\n      // Aggiornamento per queste due colonne viene eseguito dalla funzione onSelect\n      if (column.dataField === 'player1.alias' || column.dataField === 'player2.alias') return;\n      (async () => {\n        const response = await fetch('/api/v1/pair', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(row),\n        });\n        await response.json();\n      })();\n    },\n  });\n","import React from 'react';\nimport { Row, Col, Button, FormControl, InputGroup } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from '../core/types';\nimport { TournamentProgress } from 'src/@common/dto';\nimport { AuthSelector } from 'src/redux/selectors';\nimport { tournament } from 'src/test/commons';\nimport commonStyle from '../../common.module.css';\nimport { HomeIcon, PlusIcon, TrashIcon, RightArrowIcon } from '../core/icons';\nimport { FormEventType } from '../core/types';\n\ninterface ToolsbarProps {\n\taddRow: (index?: number) => Promise<void>;\n\taddMultipleRows: () => Promise<void>;\n\tconfirmPairs: () => void;\n\tgoBack: () => void;\n\tdeleteStage1: () => void;\n\tdeleteRow: () => Promise<void>;\n\tavailableRows: number;\n\tstage1Number: number;\n\trowsLength: number;\n\tdeleteDisabled: boolean;\n\tselectedLength: number;\n\tnewRowsNumber: number;\n\tsetStage1Number: React.Dispatch<React.SetStateAction<number>>;\n\tsetStage1Name: () => void;\n\tsetNewRowsNumber: React.Dispatch<React.SetStateAction<number>>;\n}\n\nconst Toolsbar: React.FC<ToolsbarProps> = ({\n\taddRow,\n\taddMultipleRows,\n\tconfirmPairs,\n\tgoBack,\n\tdeleteStage1,\n\tdeleteRow,\n\tsetStage1Number,\n\tsetStage1Name,\n\tsetNewRowsNumber,\n\tdeleteDisabled,\n\tselectedLength,\n\tavailableRows,\n\tstage1Number,\n\tnewRowsNumber,\n\trowsLength,\n\t// eslint-disable-next-line sonarjs/cognitive-complexity\n}) => {\n\tconst isAdmin = useSelector(AuthSelector.isAdmin);\n\n\tconst { t } = useTranslation(['common', 'pair']);\n\n\tconst assignMatches = (\n\t\t<InputGroup>\n\t\t\t<InputGroup.Prepend>\n\t\t\t\t<InputGroup.Text>{t('pair:stage1.set')}</InputGroup.Text>\n\t\t\t</InputGroup.Prepend>\n\t\t\t<FormControl\n\t\t\t\tplaceholder={rowsLength < 4 ? t('pair:error.3') : t('pair:error.4', { max: Math.floor(rowsLength / 4) })}\n\t\t\t\ttype=\"number\"\n\t\t\t\tstep={1}\n\t\t\t\tmin={0}\n\t\t\t\tmax={Math.floor(rowsLength / 4)}\n\t\t\t\tvalue={stage1Number !== 0 ? stage1Number : undefined}\n\t\t\t\tonChange={(event: React.FormEvent<FormEventType>) => setStage1Number(Number(event.currentTarget.value))}\n\t\t\t\tdisabled={\n\t\t\t\t\trowsLength < 4 ||\n\t\t\t\t\ttournament.progress === TournamentProgress.Stage1 ||\n\t\t\t\t\ttournament.progress === TournamentProgress.Stage2\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<InputGroup.Append>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tonClick={setStage1Name}\n\t\t\t\t\tdisabled={!stage1Number || stage1Number > Math.floor(rowsLength / 4) || rowsLength < 4}\n\t\t\t\t>\n\t\t\t\t\t{t('common:exec')}\n\t\t\t\t</Button>\n\t\t\t</InputGroup.Append>\n\t\t</InputGroup>\n\t);\n\tconst addPairs = (\n\t\t<InputGroup>\n\t\t\t<InputGroup.Prepend>\n\t\t\t\t<InputGroup.Text>{t('pair:add.multi')}</InputGroup.Text>\n\t\t\t</InputGroup.Prepend>\n\t\t\t<FormControl\n\t\t\t\tdisabled={availableRows <= 0}\n\t\t\t\ttype=\"number\"\n\t\t\t\tstep={1}\n\t\t\t\tmin={1}\n\t\t\t\tmax={availableRows}\n\t\t\t\tplaceholder={availableRows <= 0 ? t('pair:error.1') : t('pair:error.2', { max: availableRows })}\n\t\t\t\tonChange={(event: React.FormEvent<FormEventType>) => setNewRowsNumber(Number(event.currentTarget.value))}\n\t\t\t\tvalue={newRowsNumber || ''}\n\t\t\t/>\n\t\t\t<InputGroup.Append>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tonClick={(e: any) => setNewRowsNumber(availableRows)}\n\t\t\t\t\tdisabled={newRowsNumber > availableRows}\n\t\t\t\t>\n\t\t\t\t\t{t('common:max')}\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"primary\" onClick={addMultipleRows} disabled={!newRowsNumber || newRowsNumber > availableRows}>\n\t\t\t\t\t{t('common:exec')}\n\t\t\t\t</Button>\n\t\t\t</InputGroup.Append>\n\t\t</InputGroup>\n\t);\n\n\treturn (\n\t\t<div className={commonStyle.toolsBarContainer} data-cy=\"pair-toolbar\">\n\t\t\t<Row className={commonStyle.toolsBar}>\n\t\t\t\t<Col>\n\t\t\t\t\t<Button variant=\"secondary\" className=\"float-left align-middle\" onClick={goBack}>\n\t\t\t\t\t\t<HomeIcon /> {t('common:route.home')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Col>\n\n\t\t\t\t{tournament.progress > TournamentProgress.PairsSelection ? null : (\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\tclassName=\"align-middle\"\n\t\t\t\t\t\t\tonClick={() => addRow()}\n\t\t\t\t\t\t\tdisabled={availableRows <= 0 || !isAdmin}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PlusIcon /> {t('pair:add.one')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Col>\n\t\t\t\t)}\n\t\t\t\t{tournament.progress > TournamentProgress.PairsSelection ? null : (\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Button variant=\"danger\" className=\"align-middle\" onClick={deleteRow} disabled={deleteDisabled || !isAdmin}>\n\t\t\t\t\t\t\t<TrashIcon /> {selectedLength === 1 ? t('pair:delete.one') : t('pair:delete.multi')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Col>\n\t\t\t\t)}\n\t\t\t\t{tournament.progress !== TournamentProgress.Stage1 ? null : (\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Button variant=\"danger\" className=\"align-middle\" onClick={deleteStage1} disabled={!isAdmin}>\n\t\t\t\t\t\t\t{t('stage1:reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Col>\n\t\t\t\t)}\n\t\t\t\t<Col>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-warning\"\n\t\t\t\t\t\tclassName=\"default-color-white float-right align-middle\"\n\t\t\t\t\t\tonClick={confirmPairs}\n\t\t\t\t\t\tdisabled={!isAdmin}\n\t\t\t\t\t>\n\t\t\t\t\t\t<b>{t('common:continue')} </b> <RightArrowIcon />\n\t\t\t\t\t</Button>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t{isAdmin && tournament.progress <= TournamentProgress.PairsSelection ? (\n\t\t\t\t<>\n\t\t\t\t\t{assignMatches}\n\t\t\t\t\t{addPairs}\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nexport default Toolsbar;\n","import React from 'react';\nimport { SyntheticEvent } from 'react';\nimport { ExpandRowProps } from 'react-bootstrap-table-next';\nimport { LABEL_COMMON_LOADING } from 'src/@common/constants/label';\nimport { PairDTO } from 'src/@common/dto';\nimport { SuccessCodes } from 'src/@common/models/HttpStatusCode';\nimport { StatsPairMap, StatsPairResponse } from 'src/@common/models/stats.model';\nimport { fetchPairStats } from 'src/redux/services/stats.service';\nimport { MinusIcon, PlusIcon, ChartIcon } from '../core/icons';\nimport Stats from '../Stats/table.component';\nimport i18next from '../../i18n/i18n';\n\nconst expandManager = (\n\tstats: StatsPairMap,\n\tsetStats: (value: React.SetStateAction<StatsPairMap>) => void,\n\texpandedRows: number[],\n\tsetExpandedRows: (value: React.SetStateAction<number[]>) => void,\n\tisLoading: { state: boolean; message: string },\n\tsetIsLoading: (value: React.SetStateAction<{ state: boolean; message: string }>) => void\n): ExpandRowProps<PairDTO, number> => ({\n\texpandByColumnOnly: true,\n\tshowExpandColumn: true,\n\texpanded: expandedRows,\n\texpandHeaderColumnRenderer: ({ isAnyExpands }) => (\n\t\t<>\n\t\t\t{isAnyExpands ? <MinusIcon size=\"sm\" /> : <PlusIcon size=\"sm\" />}\n\t\t\t<ChartIcon size=\"lg\" />\n\t\t</>\n\t),\n\texpandColumnRenderer: ({ expanded }) => (\n\t\t<>\n\t\t\t{expanded ? <MinusIcon size=\"sm\" /> : <PlusIcon size=\"sm\" />}\n\t\t\t<ChartIcon size=\"lg\" />\n\t\t</>\n\t),\n\trenderer: (row: PairDTO) => {\n\t\tif (!row.id) {\n\t\t\treturn <p>{i18next.t('stats:partial_pair')}</p>;\n\t\t}\n\t\tif (isLoading.state) {\n\t\t\treturn <p>{i18next.t(LABEL_COMMON_LOADING)}</p>;\n\t\t}\n\t\treturn stats[row.id] ? <Stats stats={stats[row.id]!} /> : <div>{i18next.t('stats:not_found')}</div>;\n\t},\n\tonExpand: (row: PairDTO, isExpand: boolean, rowIndex: number, e: SyntheticEvent) => {\n\t\tif (row.id) {\n\t\t\tif (isExpand) {\n\t\t\t\t// Cache results\n\t\t\t\tif (stats[row.id]) {\n\t\t\t\t\tsetExpandedRows([...expandedRows, row.id]);\n\t\t\t\t} else {\n\t\t\t\t\tsetIsLoading({ state: true, message: i18next.t(LABEL_COMMON_LOADING) });\n\t\t\t\t\tfetchPairStats({ pairs: [row.id] }).then((result) => {\n\t\t\t\t\t\tif (row.id && SuccessCodes.includes(result.code)) {\n\t\t\t\t\t\t\tconst { stats: statistics } = result as StatsPairResponse;\n\t\t\t\t\t\t\tconsole.log('result :', statistics, result);\n\t\t\t\t\t\t\tstats[row.id] = statistics[row.id];\n\t\t\t\t\t\t\tsetStats(stats);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetIsLoading({ state: false, message: '' });\n\t\t\t\t\t\tsetExpandedRows([...expandedRows, row.id!]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetExpandedRows((ex) => ex.filter((x) => x !== row.id));\n\t\t\t}\n\t\t}\n\t},\n\tonExpandAll: (isExpandAll: boolean, rows: Array<PairDTO>, e: SyntheticEvent) => {\n\t\tif (isExpandAll) {\n\t\t\tconst ids = rows.filter((r) => !!r.id).map((r) => r.id!);\n\t\t\tsetIsLoading({ state: true, message: i18next.t(LABEL_COMMON_LOADING) });\n\t\t\tfetchPairStats({ pairs: ids }).then((result) => {\n\t\t\t\tif (SuccessCodes.includes(result.code)) {\n\t\t\t\t\tconst { stats: statistics } = result as StatsPairResponse;\n\t\t\t\t\tsetStats(statistics);\n\t\t\t\t}\n\t\t\t\tsetIsLoading({ state: false, message: '' });\n\t\t\t\tsetExpandedRows(ids);\n\t\t\t});\n\t\t} else {\n\t\t\tsetExpandedRows([]);\n\t\t}\n\t},\n});\n\nexport default expandManager;\n","import React, { useState, useEffect } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport BootstrapTable, { SelectRowProps, ColumnDescription } from 'react-bootstrap-table-next';\nimport { useHistory } from 'react-router';\nimport { useSelector } from '../core/types';\nimport { useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n// Components\nimport NoData from './noData.component';\n// Core / Helper / Editor\nimport { LoadingModal, YesNoModal, YesNoModalProps } from '../core/generic/Commons';\nimport { cellEditProps, columns } from './editor';\n// Style\nimport './style.css';\n// Service\nimport { fetchPlayers } from '../../redux/services/player.service';\n// Selector\nimport { AuthSelector } from '../../redux/selectors/auth.selector';\nimport { TournamentSelector } from '../../redux/selectors/tournament.selector';\n// Action\nimport { TournamentAction, PairAction } from '../../redux/actions';\nimport TournamentBadge from '../Tournament/badge.component';\nimport { useTranslation } from 'react-i18next';\n// Models\nimport { PairDTO, PlayerDTO, TournamentProgress } from 'src/@common/dto';\nimport { deletePairs, fetchPairs, findAlias, postPair, updatePair } from 'src/redux/services/pair.service';\nimport { HTTPStatusCode } from '../../@common/models/HttpStatusCode';\nimport { LABEL_COMMON_LOADING } from '../../@common/constants/label';\nimport {\n\tFetchPairsResponse,\n\tFetchPlayersResponse,\n\tFindAliasResponse,\n\tgetEmptyPair,\n\tgetEmptyPlayer,\n\tSavePairResponse,\n} from '../../@common/models';\nimport Toolsbar from './toolsbar.component';\nimport expandManager from './expand.manager';\nimport { StatsPairMap } from '../../@common/models/stats.model';\n\nconst hideAskUser = {\n\tmessage: '',\n\tonClick: () => console.log(''),\n\tshow: false,\n\ttitle: '',\n};\ninterface PairTableProps {}\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst PairsTable: React.FC<PairTableProps> = () => {\n\t// Navigation\n\tconst currentHistory = useHistory();\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation(['common', 'pair', 'stats']);\n\n\tconst isAdmin = useSelector(AuthSelector.isAdmin);\n\tconst tournament = useSelector(TournamentSelector.getTournament)!;\n\n\t// States\n\t// User messages\n\tconst [isLoading, setIsLoading] = useState({ state: false, message: t(LABEL_COMMON_LOADING) });\n\tconst [askUser, setAskUser] = useState<YesNoModalProps>(hideAskUser);\n\n\tconst [expandedRows, setExpandedRows] = useState<Array<number>>([]);\n\t// Data\n\tconst [data, setData] = useState<{ rows: PairDTO[]; players: PlayerDTO[] }>({ rows: [], players: [] });\n\tconst [selectedRows, setSelectedRows] = useState<PairDTO[]>([]);\n\tconst [stats, setStats] = useState<StatsPairMap>({});\n\t// Function params\n\tconst [stage1Number, setStage1Number] = useState<number>(0);\n\tconst [newRowsNumber, setNewRowsNumber] = useState<number>(0);\n\n\t// Initial Fetch\n\tuseEffect(() => {\n\t\tif (!tournament) return;\n\t\t(async () => {\n\t\t\tconst { pairsList } = (await fetchPairs({ tId: tournament.id })) as FetchPairsResponse;\n\t\t\tconst { playersList } = (await fetchPlayers({ addEmpty: true, tId: tournament.id })) as FetchPlayersResponse;\n\t\t\tsetData({ rows: pairsList, players: playersList });\n\t\t})();\n\t}, [tournament]);\n\n\t// User messages\n\tfunction showErrorMessage(message: string) {\n\t\tsetIsLoading({ state: false, message });\n\t\ttoast.error(message, { autoClose: 10000 });\n\t}\n\tfunction showSuccessMessage(message: string) {\n\t\tsetIsLoading({ state: false, message });\n\t\ttoast.success(message);\n\t}\n\n\t/************************************************\n\t *  Add Rows\n\t *************************************************/\n\tasync function addRow(index?: number) {\n\t\ttry {\n\t\t\tsetIsLoading({ state: true, message: t(LABEL_COMMON_LOADING) });\n\t\t\tconst emptyRow: PairDTO = getEmptyPair('', tournament.id || 0);\n\t\t\tconst result = (await postPair({ pair: emptyRow })) as SavePairResponse;\n\t\t\temptyRow.id = result.pair.id;\n\t\t\temptyRow.rowNumber = index || data.rows.length + 1;\n\t\t\tsetData((current) => ({\n\t\t\t\trows: [emptyRow, ...current.rows].map((p, i) => ({ ...p, rowNumber: i + 1 })),\n\t\t\t\tplayers: current.players,\n\t\t\t}));\n\t\t\tshowSuccessMessage(t('pair:success.add'));\n\t\t} catch (error) {\n\t\t\tshowErrorMessage(t('pair:error.19'));\n\t\t}\n\t}\n\n\tasync function addMultipleRows() {\n\t\tlet index = data.rows.length + 1;\n\t\tfor (let ii = 0; ii < newRowsNumber; ii++) {\n\t\t\tawait addRow(index);\n\t\t\tindex++;\n\t\t}\n\t\tsetNewRowsNumber(0);\n\t}\n\n\t/************************************************\n\t *  Delete Rows and Stage 1\n\t *************************************************/\n\tasync function deleteRow() {\n\t\ttry {\n\t\t\tsetIsLoading({ state: true, message: t(LABEL_COMMON_LOADING) });\n\t\t\t// Devo ripristinare i giocatori eliminati\n\t\t\tconst players: Array<PlayerDTO> = [];\n\t\t\tselectedRows.forEach((e) => {\n\t\t\t\tif (e.player1 && e.player1.id) players.push(e.player1);\n\t\t\t\tif (e.player2 && e.player2.id) players.push(e.player2);\n\t\t\t});\n\n\t\t\tawait deletePairs({ pairsList: selectedRows });\n\t\t\tsetData((current) => ({\n\t\t\t\trows: current.rows.filter((row) => !selectedRows.find((selectedRow) => selectedRow.id === row.id)),\n\t\t\t\tplayers: players\n\t\t\t\t\t? [...players, ...current.players].sort((e1, e2) => e1.alias.localeCompare(e2.alias))\n\t\t\t\t\t: current.players,\n\t\t\t}));\n\n\t\t\tshowSuccessMessage(t(`pair:success.${selectedRows.length > 1 ? 'deleteMulti' : 'deleteOne'}`));\n\t\t} catch (error) {\n\t\t\tshowErrorMessage(t('pair:error.18'));\n\t\t}\n\n\t\tsetSelectedRows([]);\n\t}\n\n\tconst processDeleteStage1 = async () => {\n\t\ttry {\n\t\t\tsetIsLoading({ state: true, message: t(LABEL_COMMON_LOADING) });\n\t\t\tconst response = await fetch('/api/v1/stage1', {\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\tbody: JSON.stringify({ tId: tournament.id }),\n\t\t\t});\n\t\t\tawait response.json();\n\t\t\t// Update tournament progress\n\t\t\tif (isAdmin) {\n\t\t\t\tdispatch(\n\t\t\t\t\tTournamentAction.update.request({\n\t\t\t\t\t\ttournament: { ...tournament, progress: TournamentProgress.PairsSelection },\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tshowSuccessMessage(t('pair:success.delete'));\n\t\t\tsetAskUser(hideAskUser);\n\t\t} catch (error) {\n\t\t\tshowErrorMessage(t('pair:error.8'));\n\t\t}\n\t};\n\n\tfunction deleteStage1() {\n\t\tif (tournament.progress > TournamentProgress.Stage1) {\n\t\t\tshowErrorMessage(t('pair:error.7'));\n\t\t\treturn;\n\t\t}\n\t\t// Chiedo conferma all'utente\n\t\tsetAskUser({\n\t\t\tmessage: `${t('pair:stage1.resetConfirm')} ?`,\n\t\t\tonClick: () => processDeleteStage1(),\n\t\t\tonHide: () => setAskUser(hideAskUser),\n\t\t\tshow: true,\n\t\t\ttitle: t('pair:stage1.reset'),\n\t\t});\n\t}\n\n\t/************************************************\n\t *  Row selection :\n\t *  - update players list when a player is selected\n\t *  -\n\t *************************************************/\n\tfunction updateOptions(player: PlayerDTO | undefined, selected: PlayerDTO) {\n\t\tif (player && player.id)\n\t\t\tif (selected.id)\n\t\t\t\tsetData((current) => ({\n\t\t\t\t\trows: current.rows,\n\t\t\t\t\tplayers: [...current.players.filter((e) => e.id !== selected.id), player].sort((e1, e2) =>\n\t\t\t\t\t\te1.alias.localeCompare(e2.alias)\n\t\t\t\t\t),\n\t\t\t\t}));\n\t\t\telse\n\t\t\t\tsetData((current) => ({\n\t\t\t\t\trows: current.rows,\n\t\t\t\t\tplayers: [...current.players, player].sort((e1, e2) => e1.alias.localeCompare(e2.alias)),\n\t\t\t\t}));\n\t\telse if (selected.id)\n\t\t\tsetData((current) => ({\n\t\t\t\trows: current.rows,\n\t\t\t\tplayers: current.players.filter((e: { id: any }) => e.id !== selected.id),\n\t\t\t}));\n\t}\n\t// Aggiorno la colonna con il giocatore selezionato\n\tconst onSelect = async (selectedElement: PlayerDTO, rowIndex: number, columnIndex: number) => {\n\t\tconst newRowsElement = await Promise.all(\n\t\t\tdata.rows.map<Promise<PairDTO>>(async (rowElement) => {\n\t\t\t\tif (rowElement.id === rowIndex) {\n\t\t\t\t\tlet row = rowElement;\n\t\t\t\t\tif (columnIndex === 1) {\n\t\t\t\t\t\tif (selectedElement.id && row.player2 && row.player2.id === selectedElement.id) {\n\t\t\t\t\t\t\t// Devo salvare l'elemnto che sto per sostituire\n\t\t\t\t\t\t\trow.player1 = getEmptyPlayer();\n\t\t\t\t\t\t\tshowErrorMessage(t('pair:error.17'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Aggiorno la lista dei giocatori disponibili prima di aggiornare i dati\n\t\t\t\t\t\t\tupdateOptions(row.player1, selectedElement);\n\t\t\t\t\t\t\trow.player1 = selectedElement;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (selectedElement.id && row.player1 && row.player1.id === selectedElement.id) {\n\t\t\t\t\t\t\trow.player2 = getEmptyPlayer();\n\t\t\t\t\t\t\tshowErrorMessage(t('pair:error.17'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdateOptions(row.player2, selectedElement);\n\t\t\t\t\t\t\trow.player2 = selectedElement;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//\n\t\t\t\t\tif (!row.alias && row.player1 && row.player1.id && row.player2 && row.player2.id) {\n\t\t\t\t\t\tconst result = (await findAlias({\n\t\t\t\t\t\t\tplayer1Id: row.player1.id,\n\t\t\t\t\t\t\tplayer2Id: row.player2.id,\n\t\t\t\t\t\t})) as FindAliasResponse;\n\t\t\t\t\t\trow.alias = result.code === HTTPStatusCode.OK && result.alias ? result.alias : '';\n\t\t\t\t\t}\n\t\t\t\t\t// update Db. Non aspetto la risposta...\n\t\t\t\t\tupdatePair({ pair: row });\n\t\t\t\t\treturn row;\n\t\t\t\t} else return rowElement;\n\t\t\t})\n\t\t);\n\t\tsetData((current) => ({\n\t\t\trows: newRowsElement,\n\t\t\tplayers: current.players,\n\t\t}));\n\t};\n\n\tconst handleSelect = (row: PairDTO, isSelected: boolean) => {\n\t\tsetSelectedRows((rows) => {\n\t\t\tconst found = rows.find((e) => e.id === row.id) ? true : false;\n\t\t\tif (isSelected) {\n\t\t\t\treturn found ? rows : [row, ...rows];\n\t\t\t} else {\n\t\t\t\treturn found ? rows.filter((e) => e.id !== row.id) : rows;\n\t\t\t}\n\t\t});\n\t\treturn true;\n\t};\n\n\t/************************************************\n\t *  Set stage1 name\n\t *************************************************/\n\tfunction setStage1Name() {\n\t\tif (!stage1Number) {\n\t\t\tshowErrorMessage(t('pair:error.6'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (tournament.progress > TournamentProgress.PairsSelection) {\n\t\t\tshowErrorMessage(t('pair:error.5'));\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading({ state: true, message: t(LABEL_COMMON_LOADING) });\n\t\tconst names = 'abcdefghijklmnopqrstuvwxyz'.toUpperCase().split('');\n\t\tlet current = 0;\n\t\tlet newRows: PairDTO[] = data.rows.map((row) => {\n\t\t\tif (current === stage1Number) current = 0;\n\t\t\trow.stage1Name = names[current];\n\t\t\tcurrent++;\n\t\t\tpostPair({ pair: row });\n\t\t\treturn row;\n\t\t});\n\t\t//const mapper = data.rows.map(p => ({ id: p.id, stage1Name: p.stage1Name }));\n\t\tshowSuccessMessage(t('pair:success.stage1Name'));\n\t\tsetData((prevData) => ({ rows: newRows, players: prevData.players }));\n\t}\n\n\t/************************************************\n\t *  Confirm pair and proced :\n\t *  - At least 4 pairs\n\t *  - All rows must have Stage1Name\n\t *  - All pairs must have 2 players\n\t *  - Must exists at least 4 pairs for each stage1\n\t *************************************************/\n\tconst confirmPairs = () => {\n\t\tif (!tournament.id) {\n\t\t\tshowErrorMessage(`${t('pair:error.16')}...`);\n\t\t\tsetTimeout(() => currentHistory.push('/'), 5000);\n\t\t}\n\n\t\t// Controllo che sia presente almeno una coppia\n\t\tif (data.rows.length < 4) {\n\t\t\tshowErrorMessage(t('pair:error.15'));\n\t\t\treturn;\n\t\t}\n\t\t// Controllo gironi non assegnati\n\t\tconst missingStage1Name = data.rows.filter((e) => !e.stage1Name || e.stage1Name === '').map((e) => e.rowNumber);\n\t\tif (missingStage1Name.length !== 0) {\n\t\t\tshowErrorMessage(t(`pair:error.${missingStage1Name.length === 1 ? '13' : '14'}`, { missingStage1Name }));\n\t\t\treturn;\n\t\t}\n\n\t\t// Controllo coppie non assegnate\n\t\tconst missingPairs = data.rows\n\t\t\t.filter((e) => !e.player1 || !e.player1.id || !e.player2 || !e.player2.id)\n\t\t\t.map((e) => e.rowNumber);\n\t\tif (missingPairs.length !== 0) {\n\t\t\tshowErrorMessage(t(`pair:error.${missingPairs.length === 1 ? '11' : '12'}`, { missingPairs }));\n\t\t\treturn;\n\t\t}\n\n\t\t// Controllo che non ci siano gironi con meno di 1 coppia ( meglio spostare 3 )\n\t\tconst MIN_PAIR_PER_STAGE = 3;\n\t\tlet invalidStage = [];\n\t\tconst pairsInStage = data.rows.reduce((allNames: { [x: string]: number }, row: { stage1Name: string }) => {\n\t\t\tif (row.stage1Name in allNames) allNames[row.stage1Name]++;\n\t\t\telse allNames[row.stage1Name] = 1;\n\t\t\treturn allNames;\n\t\t}, {});\n\t\tfor (let stageName in pairsInStage) {\n\t\t\tif (pairsInStage[stageName] <= MIN_PAIR_PER_STAGE) invalidStage.push(stageName);\n\t\t}\n\t\tif (invalidStage.length > 0) {\n\t\t\tshowErrorMessage(\n\t\t\t\tt(`pair:error.${invalidStage.length === 1 ? '9' : '10'}`, { invalidStage, min: MIN_PAIR_PER_STAGE + 1 })\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Se sono un utente che puo modificare e il torneo  in una fase minore ( vedi ordinamento Enum ) di quella attuale\n\t\t// allora aggiorno lo stato del torneo\n\t\tif (isAdmin && tournament.progress < TournamentProgress.Stage1) {\n\t\t\ttournament.progress = TournamentProgress.Stage1;\n\t\t\tdispatch(TournamentAction.update.request({ tournament }));\n\t\t}\n\t\t// Go to Stage1\n\t\tdispatch(PairAction.fetch.request({ tId: tournament.id, history: currentHistory }));\n\t};\n\n\t/************************************************\n\t *  Just go back\n\t *************************************************/\n\tfunction goBack() {\n\t\tcurrentHistory.push('/');\n\t}\n\n\t/************************************************\n\t *  Table options\n\t *************************************************/\n\tconst selectRow: SelectRowProps<PairDTO> = {\n\t\tmode: 'checkbox',\n\t\tonSelect: handleSelect,\n\t\tonSelectAll: (isSelected: boolean, rows: PairDTO[]) => setSelectedRows(isSelected ? rows : []),\n\t\tstyle: { backgroundColor: '#c8e6c9' },\n\t\thideSelectColumn: !isAdmin || tournament.progress > TournamentProgress.PairsSelection,\n\t};\n\n\tconst availableRows = Math.floor(\n\t\tMath.floor((data.players.length - 1) / 2) -\n\t\t\t(data.rows.length === 0\n\t\t\t\t? 0\n\t\t\t\t: data.rows.reduce((accumulator: number, e) => {\n\t\t\t\t\t\tif ((!e.player1 && !e.player2) || (!e.player1?.id && !e.player2?.id)) return accumulator + 1;\n\t\t\t\t\t\tif (!e.player1 || !e.player1.id || !e.player2 || !e.player2.id) return accumulator + 0.5;\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t  }, 0))\n\t);\n\n\tconst deleteDisabled = selectedRows.length <= 0 || tournament.progress > TournamentProgress.PairsSelection;\n\n\t//console.log('render table : ', players, pairs);\n\n\tconst labels = {\n\t\tplayer1: t('pair:field.player1'),\n\t\tplayer2: t('pair:field.player2'),\n\t\talias: t('pair:field.alias'),\n\t\tstage1: t('pair:field.stage1'),\n\t\tpaid1: t('pair:field.paid1'),\n\t\tpaid2: t('pair:field.paid2'),\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<YesNoModal message={askUser.message} title={askUser.title} onClick={askUser.onClick} show={askUser.show} />\n\t\t\t<LoadingModal show={isLoading.state} message={isLoading.message} />\n\t\t\t<Col>\n\t\t\t\t<Toolsbar\n\t\t\t\t\taddRow={addRow}\n\t\t\t\t\taddMultipleRows={addMultipleRows}\n\t\t\t\t\tconfirmPairs={confirmPairs}\n\t\t\t\t\tgoBack={goBack}\n\t\t\t\t\tdeleteStage1={deleteStage1}\n\t\t\t\t\tdeleteRow={deleteRow}\n\t\t\t\t\tsetStage1Number={setStage1Number}\n\t\t\t\t\tsetStage1Name={setStage1Name}\n\t\t\t\t\tsetNewRowsNumber={setNewRowsNumber}\n\t\t\t\t\tdeleteDisabled={deleteDisabled}\n\t\t\t\t\tavailableRows={availableRows}\n\t\t\t\t\tstage1Number={stage1Number}\n\t\t\t\t\tnewRowsNumber={newRowsNumber}\n\t\t\t\t\trowsLength={data.rows.length}\n\t\t\t\t\tselectedLength={selectedRows.length}\n\t\t\t\t/>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col data-cy=\"pair-table\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// https://github.com/react-bootstrap-table/react-bootstrap-table2/issues/1451\n\t\t\t\t\t\t\tdata.rows && data.players ? (\n\t\t\t\t\t\t\t\t<BootstrapTable\n\t\t\t\t\t\t\t\t\tdata-cy=\"pair-table\"\n\t\t\t\t\t\t\t\t\tbootstrap4\n\t\t\t\t\t\t\t\t\tkeyField=\"id\"\n\t\t\t\t\t\t\t\t\tdata={data.rows}\n\t\t\t\t\t\t\t\t\tcolumns={columns(onSelect, data.players, labels) as ColumnDescription<PairDTO, PairDTO>[]}\n\t\t\t\t\t\t\t\t\tcellEdit={cellEditProps(isAdmin && tournament.progress < TournamentProgress.Stage1)}\n\t\t\t\t\t\t\t\t\tselectRow={selectRow}\n\t\t\t\t\t\t\t\t\texpandRow={expandManager(stats, setStats, expandedRows, setExpandedRows, isLoading, setIsLoading)}\n\t\t\t\t\t\t\t\t\tnoDataIndication={() => (\n\t\t\t\t\t\t\t\t\t\t<NoData isEditable={isAdmin || false} addRow={() => addRow()} optionsLength={data.players.length} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tcaption={<TournamentBadge />}\n\t\t\t\t\t\t\t\t\theaderClasses=\"default-background default-color-yellow\"\n\t\t\t\t\t\t\t\t\tstriped\n\t\t\t\t\t\t\t\t\thover\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Col>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(PairsTable);\n","// Auth\nexport const LABEL_AUTH_PASSWORD = 'auth:password.password';\n\n// Common\nexport const LABEL_COMMON_LOADING = 'common:loading';\n\n// Tournament\nexport const LABEL_TOURNAMENT_SELECT = 'tournament:select';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"functionsList\":\"common_functionsList__3B3UB\",\"toolsBarContainer\":\"common_toolsBarContainer__1nanA\",\"toolsBarRow\":\"common_toolsBarRow__r8q12\"};","import React from 'react';\nimport { TournamentSelector } from '../../redux/selectors';\nimport { useSelector } from '../core/types';\nimport { Row, Col, Badge } from 'react-bootstrap';\nimport { formatDate } from '../../@common/utils/date.utils';\nimport { useTranslation } from 'react-i18next';\n\ninterface TournamentBadgeProps {}\nconst TournamentBadge: React.FC<TournamentBadgeProps> = () => {\n\tconst tournament = useSelector(TournamentSelector.getTournament)!;\n\tconst { t } = useTranslation(['tournament']);\n\treturn (\n\t\t<Row>\n\t\t\t<Col>\n\t\t\t\t<h2 className=\"float-left\">\n\t\t\t\t\t<Badge variant=\"info\">\n\t\t\t\t\t\t<span>{t(`tournament:${tournament.public ? 'public' : 'private'}_tournament`)} </span>\n\t\t\t\t\t\t<strong>\"{tournament.name.toUpperCase()}\"</strong>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<i>\n\t\t\t\t\t\t\t\t{` - ${formatDate(tournament.date)} `}\n\t\t\t\t\t\t\t\t<small> @ {t(`tournament:progress.${tournament.progress}`)}</small>\n\t\t\t\t\t\t\t\t{process.env.NODE_ENV === 'development' ? <strong>{`  --> ( ${tournament.id} )`}</strong> : null}\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Badge>\n\t\t\t\t</h2>\n\t\t\t</Col>\n\t\t</Row>\n\t);\n};\n\nexport default TournamentBadge;\n","import React, { CSSProperties } from 'react';\nimport { Table } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { Stats } from '../../@common/dto/stats/stats.dto';\n\ninterface StatsProps<T> {\n\tstats: T;\n}\n\nexport default function StatsComponent<T extends Stats>({ stats }: StatsProps<T>) {\n\tconst { t } = useTranslation(['stats']);\n\tconst stage1 = t('stats:stage1');\n\tconst stage2 = t('stats:stage2');\n\tconst tot = t('stats:tot');\n\n\t//console.log('StatsPair : ', stats);\n\tconst darkBackGround: CSSProperties = {\n\t\tbackgroundColor: 'var(--default-black)',\n\t\tcolor: 'whitesmoke',\n\t};\n\treturn (\n\t\t<Table striped bordered hover>\n\t\t\t<thead>\n\t\t\t\t<tr\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: 'cadetblue',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<td>#</td>\n\t\t\t\t\t<td>{stage1}</td>\n\t\t\t\t\t<td>{stage2}</td>\n\t\t\t\t\t<td>{tot}</td>\n\t\t\t\t\t<td>% {stage1}</td>\n\t\t\t\t\t<td>% {stage2}</td>\n\t\t\t\t\t<td>% {tot}</td>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr style={darkBackGround}>\n\t\t\t\t\t<td>{t('stats:winnings')}</td>\n\t\t\t\t\t<td>{stats.s1win}</td>\n\t\t\t\t\t<td>{stats.s2win}</td>\n\t\t\t\t\t<td>{stats.totwin}</td>\n\t\t\t\t\t<td>{stats.winS1Percentage}</td>\n\t\t\t\t\t<td>{stats.winS2Percentage}</td>\n\t\t\t\t\t<td>{stats.winPercentage}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr style={darkBackGround}>\n\t\t\t\t\t<td>{t('stats:defeats')}</td>\n\t\t\t\t\t<td>{stats.s1def}</td>\n\t\t\t\t\t<td>{stats.s2def}</td>\n\t\t\t\t\t<td>{stats.totdef}</td>\n\t\t\t\t\t<td>{stats.defS1Percentage}</td>\n\t\t\t\t\t<td>{stats.defS2Percentage}</td>\n\t\t\t\t\t<td>{stats.defPercentage}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr style={darkBackGround}>\n\t\t\t\t\t<td>{t('stats:tots')}</td>\n\t\t\t\t\t<td>{stats.totS1}</td>\n\t\t\t\t\t<td>{stats.totS2}</td>\n\t\t\t\t\t<td>{stats.totMatch}</td>\n\t\t\t\t\t<td>{stats.ratioS1}</td>\n\t\t\t\t\t<td>{stats.ratioS2}</td>\n\t\t\t\t\t<td>{stats.ratioTot}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</Table>\n\t);\n}\n","import { TournamentProgress, UserRole } from '../@common/dto';\nimport { RootState, initialState } from '../@common/models';\n\nexport const performAdminLogin = (): RootState => {\n\tinitialState.authState = adminSession;\n\tinitialState.tournamentState = {\n\t\t...initialState.tournamentState,\n\t\ttournament,\n\t\ttournamentsList,\n\t};\n\treturn initialState;\n};\n\nexport const performUserLogin = (): RootState => {\n\tinitialState.authState = userSession;\n\tinitialState.tournamentState = {\n\t\t...initialState.tournamentState,\n\t\ttournament,\n\t\ttournamentsList,\n\t};\n\treturn initialState;\n};\n\nexport const tournamentsList = [\n\t{\n\t\tid: 12,\n\t\tname: 'hFarm2',\n\t\tdate: new Date('2020-09-05T08:53:36.000Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: true,\n\t\tlabel: 'hFarm2 @ New',\n\t\townerId: 1,\n\t},\n\t{\n\t\tid: 10,\n\t\tname: '10',\n\t\tdate: new Date('2020-08-26T13:43:08.795Z'),\n\t\tprogress: TournamentProgress.Stage2,\n\t\tpublic: true,\n\t\tautoOrder: true,\n\t\tlabel: '10 @ Stage2',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 9,\n\t\tname: '9',\n\t\tdate: new Date('2020-08-26T13:43:08.789Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '9 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 8,\n\t\tname: '8',\n\t\tdate: new Date('2020-08-26T13:43:08.785Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '8 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 7,\n\t\tname: '7',\n\t\tdate: new Date('2020-08-26T13:43:08.780Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '7 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 6,\n\t\tname: '6',\n\t\tdate: new Date('2020-08-26T13:43:08.776Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '6 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 5,\n\t\tname: '5',\n\t\tdate: new Date('2020-08-26T13:43:08.770Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '5 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 4,\n\t\tname: '4',\n\t\tdate: new Date('2020-08-26T13:43:08.766Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '4 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 3,\n\t\tname: '3',\n\t\tdate: new Date('2020-08-26T13:43:08.759Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '3 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 2,\n\t\tname: '2',\n\t\tdate: new Date('2020-08-26T13:43:08.750Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '2 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 1,\n\t\tname: '1',\n\t\tdate: new Date('2020-08-26T13:43:08.703Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: false,\n\t\tlabel: '1 @ New',\n\t\townerId: 0,\n\t},\n\t{\n\t\tid: 11,\n\t\tname: 'hFarm',\n\t\tdate: new Date('2020-08-20T08:49:50.000Z'),\n\t\tprogress: TournamentProgress.New,\n\t\tpublic: true,\n\t\tautoOrder: true,\n\t\tlabel: 'hFarm @ New',\n\t\townerId: 1,\n\t},\n];\n\nexport const tournament = {\n\tid: 12,\n\tname: 'hFarm2',\n\tdate: new Date('2020-09-05T08:53:36.000Z'),\n\tprogress: TournamentProgress.New,\n\tpublic: true,\n\tautoOrder: true,\n\tlabel: 'hFarm2 @ New',\n\townerId: 1,\n};\n\nexport const adminSession = {\n\tuser: {\n\t\tid: 1,\n\t\tusername: 'Admin',\n\t\tname: 'Admin',\n\t\tsurname: 'Admin',\n\t\temail: 'admin@admin.it',\n\t\tphone: '3472545771',\n\t\tbirthday: new Date('2020-08-26T14:00:27.743Z'),\n\t\tlabel: 'Admin Admin',\n\t\trole: UserRole.Admin,\n\t},\n\tisAuthenticated: true,\n\tisAdmin: true,\n\tisLoading: false,\n};\n\nexport const userSession = {\n\tuser: {\n\t\tid: 1,\n\t\tusername: 'User',\n\t\tname: 'User',\n\t\tsurname: 'User',\n\t\temail: 'user@user.it',\n\t\tphone: '3472545770',\n\t\tbirthday: new Date('2020-08-26T14:00:27.743Z'),\n\t\tlabel: 'User user',\n\t\trole: UserRole.User,\n\t},\n\tisAuthenticated: true,\n\tisAdmin: false,\n\tisLoading: false,\n};\n"],"sourceRoot":""}